<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>在线工具</title>
    <link rel="stylesheet" href="https://gravatar.azure.cc/static/lib/fontawesome5pro/css/all.min.css?v=1.5.8">
    <script src="https://cdn.jsdelivr.net/npm/qr-code-styling/lib/qr-code-styling.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sticky-sidebar-v2/dist/sticky-sidebar.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/otpauth@9.1.4/dist/otpauth.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/pinyin-pro@3.27.0/dist/index.min.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="app" class="app-container"></div>
    <div id="sidebar-container"></div>
    <div id="search-modal-container"></div>
    
    <button id="back-to-top" class="hidden">
      <i class="far fa-arrow-up"></i>
    </button>

    <script src="main.js"></script>

    <script>
        // NOTE: The main App object from your original file is used here.
        // I have replaced the 'class' attributes in the templates below.

        const pageTools = [
            { id: '2fa', name: '2FA工具', icon: 'fas fa-shield-check', template: 'tool2FAContent' },
            { id: 'qrcode', name: '生成二维码', icon: 'fas fa-qrcode', template: 'toolQRCodeContent' },
            { id: 'text', name: '文本处理', icon: 'fas fa-file-alt', template: 'toolTextProcessingContent' },
        ];

        Object.assign(App.state, {
            tools: pageTools,
            activeToolId: pageTools[0].id,
        });

        App.init = function() {
            this.applyTheme();
            this.renderMobileSidebar();
            this.renderSearchModal();
            window.addEventListener('hashchange', () => this.router());
            window.addEventListener('load', () => this.router());
            window.addEventListener('scroll', () => this.handleScroll());
        };
        
        App.router = async function() {
            const appContainer = document.getElementById('app');
            const hash = window.location.hash.slice(1) || this.state.tools[0].id;
            this.state.activeToolId = this.state.tools.some(t => t.id === hash) ? hash : this.state.tools[0].id;

            await Promise.all([ this.fetchNavIfNeeded(), this.fetchFriendlyLinksIfNeeded() ]);
            appContainer.innerHTML = this.templates.mainLayout();
        };

        // --- Rewritten Templates with Semantic Classes ---
        Object.assign(App.templates, {
            mainLayout: () => `<div class="main-content-area">${App.templates.header()}<main class="container"><div class="main-layout"><aside class="content-column" style="width:25%">${App.templates.toolSidebar()}</aside><div class="content-column" style="width:75%">${App.templates[App.state.tools.find(t=>t.id===App.state.activeToolId).template]()}</div></div></main>${App.templates.friendlyLinksSection()}</div>${App.templates.footer()}`,
            toolSidebar: () => `<div class="tool-sidebar"><div class="tool-sidebar-inner">${App.state.tools.map(tool => `<a href="#${tool.id}" class="tool-item ${tool.id === App.state.activeToolId ? 'active' : ''}"><div class="tool-icon-wrapper"><i class="${tool.icon}"></i></div><span class="tool-label">${tool.name}</span></a>`).join('')}</div></div>`,
            tool2FAContent: () => `<div class="card tool-content"><h2>2FA验证</h2><p>双重验证/二步验证码获取工具 (相当于谷歌身份验证器的网页版)。</p><input type="text" id="2fa-secret" placeholder="点击此处输入密钥" class="form-input"><button class="button">点击获取验证码</button></div>`,
            toolQRCodeContent: () => `<div class="card tool-content"><h2>生成二维码</h2><p>在线二维码(QR码)生成工具。</p><textarea id="qr-data" class="form-input" style="height: 8rem;"></textarea><button class="button">生成QR码</button></div>`,
            toolTextProcessingContent: () => `<div class="card tool-content"><h2>文本处理</h2><p>常用的文本转换和处理工具。</p><textarea class="form-input" style="height: 8rem;"></textarea><button class="button">转换</button></div>`,
        });

        App.init();
    </script>
</body>
</html>
